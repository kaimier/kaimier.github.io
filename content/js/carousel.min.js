!function(t){var s=function(s){var e=this;this.poster=s,this.posterItemMain=s.find("ul.poster-list"),this.nextBtn=s.find("div.poster-next-btn"),this.prevBtn=s.find("div.poster-prev-btn"),this.posterItems=s.find("li.poster-item"),this.posterFirstItem=this.posterItems.first(),this.posterLastItem=this.posterItems.last(),this.setting={width:1e3,height:270,posterWidth:640,posterHeight:270,scale:.9,speed:500,verticalAlign:"middel"},t.extend(this.setting,this.getSetting()),this.setSettingValue(),this.setPosterPos(),this.nextBtn.click(function(){e.carouseRotate("left")}),this.prevBtn.click(function(){e.carouseRotate("right")})};s.prototype={carouseRotate:function(s){var e=this,i=[];"left"===s?(this.posterItems.each(function(){var s=t(this),h=s.prev().get(0)?s.prev():e.posterLastItem,n=h.width(),o=h.height(),r=h.css("zIndex"),c=h.css("opacity"),a=h.css("left"),g=h.css("top");i.push(r),s.animate({width:n,height:o,opacity:c,left:a,top:g})}),this.posterItems.each(function(s){t(this).css("zIndex",i[s])})):"right"===s&&(this.posterItems.each(function(){var s=t(this),h=s.next().get(0)?s.next():e.posterFirstItem,n=h.width(),o=h.height(),r=h.css("zIndex"),c=h.css("opacity"),a=h.css("left"),g=h.css("top");i.push(r),s.animate({width:n,height:o,opacity:c,left:a,top:g})}),this.posterItems.each(function(s){t(this).css("zIndex",i[s])}))},setPosterPos:function(){var s=this,e=this.posterItems.slice(1),i=e.size()/2,h=e.slice(0,i),n=Math.floor(this.posterItems.size()/2);leftSlice=e.slice(i);var o=this.setting.posterWidth,r=this.setting.posterHeight,c=(this.setting.width-this.setting.posterWidth)/2/n,a=(this.setting.width-this.setting.posterWidth)/2,g=a+o;h.each(function(e){n--;var i=e;o*=s.setting.scale,r*=s.setting.scale,t(this).css({zIndex:n,width:o,height:r,opacity:1/++e,left:g+ ++i*c-o,top:s.setVertucalAlign(r)})});var p=h.last().width(),l=h.last().height(),d=Math.floor(this.posterItems.size()/2);leftSlice.each(function(e){t(this).css({zIndex:e,width:p,height:l,opacity:1/d,left:e*c,top:s.setVertucalAlign(l)}),p/=s.setting.scale,l/=s.setting.scale,d--})},setVertucalAlign:function(t){var s=this.setting.verticalAlign,e=0;return e="middle"===s?(this.setting.height-t)/2:"top"===s?0:"bottom"===s?this.setting.height-t:(this.setting.height-t)/2},setSettingValue:function(){this.poster.css({width:this.setting.width,height:this.setting.height}),this.posterItemMain.css({width:this.setting.width,height:this.setting.height});var t=(this.setting.width-this.setting.posterWidth)/2;this.nextBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.prevBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.posterFirstItem.css({width:this.setting.posterWidth,height:this.setting.posterHeight,left:t,zIndex:Math.ceil(this.posterItems.size()/2)})},getSetting:function(){var s=this.poster.attr("data-setting");return s&&""!==s?t.parseJSON(s):{}}},s.init=function(s){var e=this;s.each(function(){new e(t(this))})},window.Carousel=s}(jQuery);