(function(){MCommonHeaderBottom=function(d){var a="1.01";var e={useDefaultImp:true,css:["http://st.360buyimg.com/common/commonH_B/css/header.css?v="+a],js:["http://st.360buyimg.com/common/commonH_B/js/m_common.js?v="+a,"http://st.360buyimg.com/m/js/2014/module/plugIn/downloadAppPlugIn.js?v=jd2015030522",]};if(d){if(typeof(d.useDefaultImp)=="boolean"){e.useDefaultImp=d.useDefaultImp}if(d.css){e.css=d.css}if(d.js){e.js=d.js}}var c={_isIncludedCss:false,debug:false,getSid:function(h,i){if(this._isNotBlank(i)){return h+"sid="+i}return""},templeteOutput:function(j){var h=j.templete;var l=j.param;var i=h;for(var k in l){i=i.replace(new RegExp("{"+k+"}","g"),l[k])}return i},hasClass:function(i,h){return i.className.match(new RegExp("(\\s|^)"+h+"(\\s|$)"))},addClass:function(i,h){if(!this.hasClass(i,h)){i.className+=" "+h}},removeClass:function(j,h){if(this.hasClass(j,h)){var i=new RegExp("(\\s|^)"+h+"(\\s|$)");j.className=j.className.replace(i," ")}},removeClassBatch:function(j,h){for(var i in j){this.removeClass(this.getElementById(j[i]),h)}},includeCss:function(){if(!this._isIncludedCss){for(var h=0;h<e.css.length;h++){this._includeCss(e.css[h])}this._isIncludedCss=true}},innerHtml:function(h){var j=h.sid;var m=h.htmlStr;var k=h.prefix;var i=h.divId;var l=this.templeteOutput({templete:m,param:{prefix:k,sid:j}});this.getElementById(i).innerHTML=l},getElementById:function(h){return document.getElementById(h)},addEvent:function(j,i,h){var k=this.getElementById(j);if(k){k.addEventListener(i,h,false)}},removeEvent:function(j,i,h){var k=this.getElementById(j);if(k){k.removeEventListener(i,h,false)}},divShow:function(h){h.style.display=""},divHide:function(h){h.style.display="none"},loadJS:function(h,k){var j=document.createElement("script");j.type="text/javascript";j.src=h;j.onload=j.onreadystatechange=function(){if(this.readyState&&this.readyState=="loading"){return}k()};j.onerror=function(){i.removeChild(j);k()};var i=document.getElementsByTagName("head")[0];i.appendChild(j)},runFunction:function(h){if(h){h()}},loadDownloadAppPlugIn:function(h){if(e.useDefaultImp){this.loadJS(e.js[1],function(){h()})}},executeDefaultFunCtion:function(h,i){if(h&&e.useDefaultImp){if(i){h(i)}else{h()}}},_includeCss:function(j){var l=function(o,n){for(var m=0;m<o.length;m++){if(o[m].href&&o[m].href.indexOf(n)!=-1){return true}}return false};var h=document.getElementsByTagName("link");if(l(h,j)){return true}var k=document.createElement("link");k.setAttribute("rel","stylesheet");k.setAttribute("type","text/css");k.setAttribute("charset","utf-8");k.setAttribute("href",j);var i=document.getElementsByTagName("head")[0];i.appendChild(k)},_isNotBlank:function(h){if(h&&h!=""){return true}return false},printDeugInfo:function(h){if(this.debug){console.log(h)}}};var g={shortcutIds:[],args:{hrederId:"m_common_header",sid:"",isShowShortCut:false,selectedShortCut:""},create:function(j){this.args=j;if(!this._validate()){return false}var i=c.getSid("?",this.args.sid);var m=this.getTempleteHtml();var l=this.args.hrederId;var h=this.args.hrederId;this._initShortcutId(l);c.innerHtml({divId:h,sid:i,htmlStr:m,prefix:l});this._setCutrrentSelectedSyle(this.args.selectedShortCut);this._initShortCutShow(this.args.isShowShortCut,l);var k=this;c.addEvent(l+"_goback","click",function(){c.runFunction(k.args.onClickGoback);c.executeDefaultFunCtion(pageBack)});c.addEvent(l+"_jdkey","click",function(){c.runFunction(k.args.onClickJdkey);c.executeDefaultFunCtion(k.shortCutShowHide,l)});c.addEvent(l+"_shortcut_m_index","click",function(){c.runFunction(k.args.onClickIndex)});c.addEvent(l+"_shortcut_category_search","click",function(){c.runFunction(k.args.onClickSearch)});c.addEvent(l+"_shortcut_p_cart","click",function(){c.runFunction(k.args.onClickCart)});c.addEvent(l+"_shortcut_h_home","click",function(){c.runFunction(k.args.onClickHome)})},getShortcutId:function(h){return this.shortcutIds[h-1]},getTempleteHtml:function(){var i='<header class="jd-header">    <div class="jd-header-bar">        <div id="{prefix}_goback" class="jd-header-icon-back"><span></span></div>        <div class="jd-header-title">{title}</div>        <div id="{prefix}_jdkey" class="jd-header-icon-shortcut"><span></span></div>    </div>    <ul id="{prefix}_shortcut" class="jd-header-shortcut" style="display: none">        <li id="{prefix}_shortcut_m_index">            <a href="http://m.jd.com/index.html{sid}">                <span class="shortcut-home"></span>                <strong>首页</strong>            </a>        </li>        <li id="{prefix}_shortcut_category_search">            <a href="http://m.jd.com/category/all.html{sid}">                <span class="shortcut-categories"></span>                <strong>分类搜索</strong>            </a>        </li>        <li id="{prefix}_shortcut_p_cart">            <a href="http://p.m.jd.com/cart/cart.action{sid}" id="html5_cart">                <span class="shortcut-cart"></span>                <strong>购物车</strong>            </a>        </li>        <li id="{prefix}_shortcut_h_home">            <a href="http://home.m.jd.com/myJd/home.action{sid}">                <span class="shortcut-my-account"></span>                <strong>我的京东</strong>            </a>        </li>    </ul></header>';var h="";if(this.args.title){h=this.args.title}i=c.templeteOutput({templete:i,param:{title:h}});return i},shortCutShowHide:function(h){var i=c.getElementById(h+"_shortcut");var j=i.style.display;if(j=="none"){c.divShow(i)}else{c.divHide(i)}},_initShortcutId:function(i){var h=[i+"_shortcut_m_index",i+"_shortcut_category_search",i+"_shortcut_p_cart",i+"_shortcut_h_home"];this.shortcutIds=h},_initShortCutShow:function(i,h){var j=c.getElementById(h+"_shortcut");if(i){c.divShow(j)}else{c.divHide(j)}},_setCutrrentSelectedSyle:function(h){c.removeClassBatch(this.shortcutIds,"current");if(c._isNotBlank(this.getShortcutId(h))){c.addClass(c.getElementById(this.getShortcutId(h)),"current")}},_validate:function(){var h=true;if(!this._isHasHeaderId()){h=false}return h},_isHasHeaderId:function(){var h=false;if(c.getElementById(this.args.hrederId)){h=true}else{c.printDeugInfo("请正确拼写或添加通用头ID.")}return h}};var b={args:{bottomId:"m_common_bottom",sid:"",isShowBottom:true,footerPlatforms:""},create:function(j){this.args=j;if(!this._validate()){return false}var i=c.getSid("?",this.args.sid);var m=this.getTempleteHtml(this.args);var l=this.args.bottomId;var h=this.args.bottomId;c.innerHtml({divId:h,htmlStr:m,prefix:l});var k=this;c.loadJS(e.js[0],function(){});this._addFooterPlatformEvent()},getTempleteHtml:function(h){var i='<footer id="{prefix}_jd_footer" class="jd-footer">'+this._getLinksHtml(h)+this._getPlatformsHtml(h)+this._getCopyrightHtml(h)+"</footer>";return i},_getLinksHtml:function(h){var j="";if(h.pin&&h.pin!=""){j='        <li class=""><a href="http://home.m.jd.com/myJd/home.action{sid}">{pin}</a></li>        <li><a href="https://passport.m.jd.com/user/logout.action{sid}">退出</a></li>'}else{j='        <li class=""><a href="https://passport.m.jd.com/user/login.action{sid}">登录</a></li>        <li><a href="http://passport.m.jd.com/register/mobileRegister.action{sid}">注册</a></li>'}var l='	<div class="jd-1px-line-up"></div>    <ul class="jd-footer-links">'+j+'        <li><a href="http://m.jd.com/showvote.html{sid}">反馈</a></li>        <li><a href="#top">回到顶部</a></li>    </ul>';var i=c.getSid("?",h.sid);var k=h.pin;l=c.templeteOutput({templete:l,param:{sid:i,pin:k}});return l},_getPlatformsHtml:function(h){var m=this.args.bottomId;var p=h.footerPlatforms;if(p.length<=0){return""}var o="";var l="";for(var k=0;k<p.length;k++){l=p[k];var j="";if(l.href){j="href='"+l.href+"'"}if(l.name=="standard"){o+='<li id="{prefix}_standard" class="jd-footer-icon-standard"><a '+j+">标准版</a></li>"}else{if(l.name=="touchscreen"){o+='<li id="{prefix}_touchscreen" class="jd-footer-icon-touchscreen current"><a '+j+">触屏版</a></li>"}else{if(l.name=="pc"){o+='<li id="{prefix}_pc" class="jd-footer-icon-pc"><a '+j+">电脑版</a></li>"}else{if(l.name=="apps"){o+='<li id="{prefix}_apps"  class="jd-footer-icon-apps"><a class="badge" "'+j+">客户端</a></li>"}}}}}var n='<div class="jd-1px-line-up"></div>    <ul class="jd-footer-platforms">'+o+"    </ul>";return n},_getCopyrightHtml:function(h){var i='<div class="jd-1px-line-up"></div><div class="jd-footer-copyright">Copyright © 2012-2015 京东JD.com 版权所有 </div>';return i},_initDefaultFooterPlatforms:function(){this.args.footerPlatforms=this.platformEnum(this.args.sid).enum4},_addFooterPlatformEvent:function(){var i=this;var k=this.args.footerPlatforms;var j=this.args.bottomId;var h=function(m,l){var n=m+"_"+l;if(c.getElementById(n)){c.addEvent(n,"click",function(){for(var o=0;o<k.length;o++){if(k[o].name==l){c.runFunction(k[o].onClickX);break}}})}};h(j,"standard");h(j,"pc");h(j,"touchscreen");h(j,"apps");c.loadDownloadAppPlugIn(function(){var m=null;var l="";if(document.getElementById(j+"_apps")){if(i.args.downloadAppPlugIn){if(i.args.downloadAppPlugIn.parameters){m=i.args.downloadAppPlugIn.parameters}if(i.args.downloadAppPlugIn.otherApp){l=i.args.downloadAppPlugIn.otherApp}$("#"+j+"_apps").downloadAppPlugIn(m,l)}else{$("#"+j+"_apps").downloadAppPlugIn()}}})},_initBottomShow:function(i,h){var j=c.getElementById(h+"_jd_footer");if(i){c.divShow(j)}else{c.divHide(j)}},_validate:function(){var h=true;if(!this._isHasBottomId()){h=false}return h},_isHasBottomId:function(){var h=false;if(c.getElementById(this.args.bottomId)){h=true}else{c.printDeugInfo("请正确拼写或添加通用尾ID.")}return h}};var f={args:{tipId:"m_common_tip",sid:"",isShowTip:true,isfloat:true,onClickTrynow:function(){}},create:function(j){this.args=j;if(!this._validate()){return false}var k=window.localStorage?true:false;if(k&&this.args.isAlwayShow){localStorage.removeItem("downCloseDate")}var i=c.getSid("?",this.args.sid);var n=this.getTempleteHtml(j);var m=this.args.tipId;var h=this.args.tipId;c.innerHtml({divId:h,sid:i,htmlStr:n,prefix:m});this._setFloat(this.args.isfloat,m);var l=this;c.addEvent(m+"_jd_download_tip_x","click",function(){c.runFunction(l.args.onClickTipX)});c.addEvent(m+"_trynow","click",function(){c.runFunction(l.args.onClickTrynow)});if(!this.args.isUseCustomDownloadApp){c.loadDownloadAppPlugIn(function(){var p=null;var o="";if(document.getElementById(m+"_trynow")){if(l.args.downloadAppPlugIn){if(l.args.downloadAppPlugIn.parameters){p=l.args.downloadAppPlugIn.parameters}if(l.args.downloadAppPlugIn.otherApp){o=l.args.downloadAppPlugIn.otherApp}$("#"+m+"_trynow").downloadAppPlugIn(p,o)}else{$("#"+m+"_trynow").downloadAppPlugIn()}$("#"+m+"_jd_download_tip_x").downloadAppPlugInClose(m+"_jd_download_tip")}})}},getTempleteHtml:function(j){var i="客户端首单</br>满79元送79元";var k="";if(j.copyWrite){i=j.copyWrite}if(j.location){var h=j.location;k=' style = "'+localStyle+'"'}var l='<div id="{prefix}_jd_download_tip" '+k+' class="tryme onfoot">	    <div>	        <div id="{prefix}_jd_download_tip_x" class="later"></div>	        <a id="{prefix}_trynow" href="#" class="trynow"></a>	        <span>'+i+"</span>	    </div>	</div>";return l},_setFloat:function(i,h){var j=c.getElementById(h+"_jd_download_tip");if(i){c.addClass(j,"onfoot")}else{c.removeClass(j,"onfoot")}},_showTip:function(i,h){var j=c.getElementById(h+"_jd_download_tip");if(i){c.divShow(j)}else{c.divHide(j)}},_validate:function(){var h=true;if(!this._isHasTipId()){h=false}return h},_isHasTipId:function(){var h=false;if(c.getElementById(this.args.tipId)){h=true}else{c.printDeugInfo("请正确拼写或添加通用提示ID.")}return h}};c.includeCss();return{header:function(h){g.create(h)},bottom:function(h){b.create(h)},jdTip:function(h){f.create(h)},platformEnum:function(j,h){var i="";if(h){i=c.getSid("&",h)}return{enum0:[],enum1:[{id:4,name:"apps",href:"",onClickX:function(){}}],enum3:[{id:1,name:"standard",href:"http://wap.jd.com/index.html?v=w"+i,onClickX:function(){}},{id:2,name:"touchscreen",href:"",onClickX:function(){}},{id:4,name:"apps",href:"",onClickX:function(){}}],enum3_1:[{id:3,name:"pc",href:"",onClickX:function(){skip(j)}},{id:2,name:"touchscreen",href:"",onClickX:function(){}},{id:4,name:"apps",href:"",onClickX:function(){}}],enum4:[{id:1,name:"standard",href:"http://wap.jd.com/index.html?v=w"+i,onClickX:function(){}},{id:2,name:"touchscreen",href:"",onClickX:function(){}},{id:3,name:"pc",href:"",onClickX:function(){skip(j)}},{id:4,name:"apps",href:"",onClickX:function(){}}]}},version:a}}})();