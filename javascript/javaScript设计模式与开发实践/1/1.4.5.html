<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript中的原型继承</title>
</head>
<body>
    <script type="text/javascript">
    /*
    1.所有的数据都是对象。
    2.要得到一个对象，不是通过实例化类，而是找到一个对象作为原型并克隆它。
    3.对象会记住它的原型。
    4.如果对象无法响应某个请求，它会把这个请求委托给它自己的原型。
     */
    ;(function(){
        /*
        1.基本类型：undefined,number,boolean,string,function,object
        2.对象类型
        备注：JavaScript设计者的本意：除了underfined之外，一切都是对象。为了实现这一目标，number,boolean,string这几种基本类型数据也可以通过“包装类”的方式变成对象类型数据来处理。
        JavaScript中的根对象是Object.prototype对象。Object.prototype对象是一个空的对象。我们在JavaScript遇到的每个对象，实际上都是从Object.prototype对象克隆而来的。
         */
        var obj1=new Object();
        var obj2={};
        console.log(Object.getPrototypeOf(obj1));
        console.log(Object.getPrototypeOf(obj1)===Object.prototype);
        console.log(Object.getPrototypeOf(obj2)===Object.prototype);
    })('1.所有的数据都是对象。');
    ;(function(){
        function Person(name) {
            this.name=name;
        };
        Person.prototype.getName=function() {
            return this.name;
        }
        var a=new Person('老苏');
        console.log(a.name);//输出：老苏
        console.log(a.getName());//输出：老苏
        console.log(Object.getPrototypeOf(a)===Person.prototype);//输出:true;

        /*
        注：Person并不是类，而是函数构造器，JavaScript的函数既可以作为普通函数被调用,也可以作为构造器被调用。当使用new运算符来调用函数时，些时的函数就是一个构造器。
         */

    })('2.要得到一个对象，不是通过实例化类，而是找到一个对象作为原型并克隆它。');
    ;(function(){
        function Person(name) {
            this.name=name;
        };
        Person.prototype.getName=function() {
            return this.name;
        };
        var objectFactory=function() {
            var obj=new Object(),//从Object.prototype上克隆一个空的对象
                Constructor=[].shift.call(arguments); //取得外部传入的构造器，此例是Person
            obj.__proto__=Constructor.prototype;//指向正确的原型
            var ret=Constructor.apply(obj,arguments);//借用外部传入的构造器给obj设置属性
            return typeof ret ==='object'?ret:obj;//确保构造总是会返回一个对象
        }
        var a=objectFactory(Person,'sven');
        console.log(a.name);
        console.log(a.getName);
        console.log(Object.getPrototypeOf(a)===Person.prototype);
        /*
        ????????????? 不解？
         */
        // var a=objectFactory('A','sven');
        // var a=new A('sven');
    })('');
    ;(function(){
        
    })('3.对象会记住它的原型。');
    </script>
</body>
</html>