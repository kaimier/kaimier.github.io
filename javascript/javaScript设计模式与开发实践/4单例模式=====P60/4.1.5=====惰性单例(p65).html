<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>惰性单例</title>
</head>
<body>
    <button id="loginBtn">登录</button>
    <script type="text/javascript">
    /**
     * 惰性单例指的是在需要的时候才创建对象实例。惰性单例是单例模式的重点，这种技术在实
际开发中非常有用，有用的程度可能超出了我们的想象，实际上在本章开头就使用过这种技术，
instance 实例对象总是在我们调用 Singleton.getInstance 的时候才被创建，而不是在页面加载好
的时候就创建，代码如下：
     */
      // Singleton.getInstance=(function() {
      //     var instance=null;
      //     return function(name) {
      //         if(!instance){
      //           instance = new Singleton(name);
      //         }
      //         return instance;
      //     }
      // })();
      ;(function() {
          // var loginLayer=(function() {
          //     var div=document.createElement('div');
          //     div.innerHTML='我是登录框';
          //     div.style.display='none';
          //     document.body.appendChild(div);
          //     return div;
          // })();
          // document.getElementById('loginBtn').onclick=function () {
          //     loginLayer.style.display='block';
          // }
      })('1');
      ;(function() {
          // var createLoginLayer=function() {
          //     var div=document.createElement('div');
          //     div.innerHTML='我是登录框';
          //     div.style.display='none';
          //     document.body.appendChild(div);
          //     return div;
          // };
          // document.getElementById('loginBtn').onclick=function() {
          //     var loginLayer=createLoginLayer();
          //     loginLayer.style.display='block';
          // }
          // 虽然现在达到了惰性的目的，但失去了单例的效果
      })('2');
      ;(function() {
          var createLoginLayer=(function() {
              var div;
              return function() {
                  if (!div) {
                     div=document.createElement('div');
                     div.innerHTML='我是登录框';
                     div.style.display='none';
                     document.body.appendChild(div);
                  }
                  return div;
              }
          })();
          document.getElementById('loginBtn').onclick=function() {
              var loginLayer=createLoginLayer();
              loginLayer.style.display='block';
          }
      })('3');
    </script>
</body>
</html>